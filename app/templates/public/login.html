{% extends "base.html" %}

{% block title %}Sign In | TestLegion{% endblock %}

{% block content %}
<section class="ud-page-banner">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <div class="ud-banner-content">
          <h1>Login Page</h1>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="ud-login">
  <div class="container">
    <div class="row">
      <div class="col-lg-12">
        <div class="ud-login-wrapper">
          <div class="ud-login-logo">
            <img src="{{ url_for('public_static', path='images/logo/logo-2.svg') }}" alt="logo" />
          </div>

          <!-- ✅ Flash message after success redirects -->
{% if request.query_params.get('message') == 'signup_success' %}
  <div class="alert alert-success text-center mt-3" role="alert">
    You have successfully signed up. Please log in.
  </div>
{% elif request.query_params.get('message') == 'resetlink_sent' %}
  <div class="alert alert-success text-center mt-3" role="alert">
    We’ve sent you a link to reset your password – check your email.
  </div>
{% elif request.query_params.get('message') == 'password_reset_success' %}
  <div class="alert alert-success text-center mt-3" role="alert">
    Your password has been successfully reset. Please log in.
  </div>
{% elif request.query_params.get('message') == 'email_confirmed' %}
  <div class="alert alert-success text-center mt-3" role="alert">
    Your email has been confirmed. You can now log in.
  </div>
{% endif %}

{% if error %}
  <div class="alert alert-danger mt-3" role="alert">
    {{ error }}
  </div>
{% endif %}


          <form class="ud-login-form mt-4" method="post" action="/login" >
            <div class="ud-form-group">
              <input
                type="email"
                name="email"
                placeholder="Email/username"
                required
              />
            </div>
            <div class="ud-form-group">
              <input
                type="password"
                name="password"
                placeholder="*********"
                required
              />
            </div>

            <input type="hidden" name="csrf_token" value="{{ csrf_token() }}">

            <div class="ud-form-group">
              <button type="submit" class="ud-main-btn w-100">Login</button>
            </div>
          </form>

          <div class="ud-socials-connect">
            <p>Connect With</p>
            <ul>
              <li><a href="javascript:void(0)" class="facebook"><i class="lni lni-facebook-filled"></i></a></li>
              <li><a href="javascript:void(0)" class="twitter"><i class="lni lni-twitter-filled"></i></a></li>
              <li><a href="javascript:void(0)" class="google"><i class="lni lni-google"></i></a></li>
            </ul>
          </div>

          <a class="forget-pass" href="{{ url_for('forgot_password_get') }}">Forgot your password?</a>
          <p class="signup-option">
            Not a member yet? <a href="/signup">Sign Up</a>
          </p>
        </div>
      </div>
    </div>
  </div>
</section>
{% endblock %}

